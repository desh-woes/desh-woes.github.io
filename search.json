---
# Jekyll front matter
# layout: null tells Jekyll not to wrap this file in an HTML layout template
# This ensures we get pure JSON output for the search index
layout: null
---
[
{% assign published_posts = site.posts | where_exp: "post", "post.published != false" %}
{% for post in published_posts %}
  {
    "title": {{ post.title | jsonify }},
    "url": {{ post.url | prepend: site.baseurl | replace: '//', '/' | jsonify }},
    "date": {{ post.date | date_to_string | jsonify }},
    "excerpt": {{ post.excerpt | default: post.content | strip_html | truncatewords: 30 | jsonify }},
    "content": {{ post.content | strip_html | jsonify }}
  }{% unless forloop.last %},{% endunless %}
{% endfor %}
]
