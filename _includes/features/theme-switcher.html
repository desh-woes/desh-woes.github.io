{% comment %}
  Theme Switcher
  Handles theme toggle button interactions.
  Depends on theme-manager.html for theme operations.
{% endcomment %}

<script>
(function() {
  'use strict';
  
  function handleThemeToggle(event) {
    if (!window.ThemeManager) return;
    
    window.ThemeManager.toggleTheme();
    
    // Close mobile menu if toggled from mobile button
    if (event?.target?.closest('#theme-toggle-mobile') && window.closeMobileMenu) {
      window.closeMobileMenu();
    }
  }
  
  function initThemeSwitcher() {
    if (!window.ThemeManager) {
      setTimeout(initThemeSwitcher, 50);
      return;
    }
    
    const toggles = document.querySelectorAll('#theme-toggle, #theme-toggle-mobile');
    if (toggles.length === 0) {
      setTimeout(initThemeSwitcher, 100);
      return;
    }
    
    toggles.forEach(toggle => {
      toggle.removeEventListener('click', handleThemeToggle);
      toggle.addEventListener('click', handleThemeToggle);
    });
  }
  
  function init() {
    setTimeout(initThemeSwitcher, 100);
  }
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

